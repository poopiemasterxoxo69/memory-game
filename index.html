<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Game</title>
    <link rel="stylesheet" href="pokecss.css">
</head>
<body>

<p id="test">Aantal kaarten: 0</p>
<p id="score_toner"></p>
<p id="timer">Tijd: 0s</p>

<div class="memory-game" id="memoryGame"></div>

<!-- Knoppen om kaarten toe te voegen -->
<div class="button-container">
    <button class="spel_knop makkelijk" onclick="makkelijk()">Makkelijk</button>
    <button class="spel_knop normaal" onclick="normaal()">Normaal</button>
    <button class="spel_knop moeilijk" onclick="moeilijk()">Moeilijk</button>
    <button class="spel_knop extreem-moeilijk" onclick="extreem_moeilijk()">Extreem Moeilijk</button>
    <button class="spel_knop andergraad" onclick="andergraad()">Andere moeilijkheidsgraad</button>
</div>

<script>
    let getal = 0;
    let memoryGame = document.getElementById("memoryGame");
    let testP = document.getElementById("test");
    let score_toner = document.getElementById("score_toner");
    let timerDisplay = document.getElementById("timer");
    
    let graadgekozen = false;
    let aantal_nieuwe_kaarten = 0;
    let openCards = [];
    let matchedCards = [];
    let score = 0;
    let timer_aangaan = false;
    let timer = 0;
    let timerInterval;
    
    function startTimer() {
        if (timer_aangaan) {
            timerDisplay.textContent = `Tijd: ${timer.toFixed(1)}s`; // Toon beginnende tijd
            timerInterval = setInterval(function () {
                if (timer > 0) {
                    timer -= 0.1; // Verlaag de timer met 0,1 seconde
                    timerDisplay.textContent = `Tijd: ${timer.toFixed(1)}s`; // Werk de timer bij
                } else {
                    clearInterval(timerInterval); // Stop de timer als deze 0 bereikt
                    alert("Tijd is op! Probeer opnieuw."); // Actie bij timer einde
                }
            }, 100); // Update elke 100ms (0,1s)
        }
    }
    
    function resetTimer() {
    stopTimer(); // Stop de huidige timer
    if (graadgekozen) {
        if (aantal_nieuwe_kaarten === 40) {
            timer = 7.5; // Moeilijk starttijd
        } else if (aantal_nieuwe_kaarten === 48) {
            timer = 4.5; // Extreem Moeilijk starttijd
        }
        startTimer(); // Start de timer opnieuw
    }
}


    function stopTimer() {
        clearInterval(timerInterval);
        timer_aangaan = false;
    }
    
    // Spelkeuzes
    function makkelijk() {
        if (!graadgekozen) {
            aantal_nieuwe_kaarten = 24;
            graadgekozen = true;
            voegKaartenToe(aantal_nieuwe_kaarten);
            memoryGame.classList.remove("small-cards");
        }
    }
    
    function normaal() {
        if (!graadgekozen) {
            aantal_nieuwe_kaarten = 32;
            graadgekozen = true;
            voegKaartenToe(aantal_nieuwe_kaarten);
            memoryGame.classList.remove("small-cards");
        }
    }
    
    function moeilijk() {
        if (!graadgekozen) {
            aantal_nieuwe_kaarten = 40;
            graadgekozen = true;
            timer_aangaan = true;
            timer = 7.5; // Starttijd voor moeilijk
            voegKaartenToe(aantal_nieuwe_kaarten);
            memoryGame.classList.add("small-cards");
            startTimer();
        }
    }
    
    function extreem_moeilijk() {
        if (!graadgekozen) {
            aantal_nieuwe_kaarten = 48;
            graadgekozen = true;
            timer_aangaan = true;
            timer = 4.5; // Starttijd voor extreem moeilijk
            voegKaartenToe(aantal_nieuwe_kaarten);
            memoryGame.classList.add("small-cards");
            startTimer();
        }
    }
    
    function voegKaartenToe(aantalKaarten) {
        if (graadgekozen) {
            const kaarten = document.querySelectorAll('.speelkaart');
            kaarten.forEach(kaart => kaart.remove());
            getal = 0;
            matchedCards = [];
        }
    
        let numbers = [];
        for (let i = 1; i <= aantalKaarten / 2; i++) {
            numbers.push(i, i);
        }
    
        numbers = shuffle(numbers);
    
        for (let i = 0; i < aantalKaarten; i++) {
            let newCard = document.createElement("div");
            newCard.classList.add("speelkaart");
            newCard.dataset.number = numbers[i];
    
            newCard.innerHTML = `
                <div class="kaart-inner">
                    <div class="kaart-achterkant"></div>
                    <div class="kaart-voorkant" style="background-image: url('imgs/pokemon_kaart_${numbers[i]}.png');"></div>
                </div>
            `;
            newCard.addEventListener('click', flipCard);
            memoryGame.appendChild(newCard);
        }
    
        getal += aantalKaarten;
        testP.textContent = "Aantal kaarten: " + getal;
    
        if (timer_aangaan) {
            startTimer();
        }
    }
    
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }
    
    function flipCard() {
    if (openCards.length < 2 && !this.classList.contains("open") && !matchedCards.includes(this)) {
        this.classList.add("open");
        openCards.push(this);

        // Reset de timer bij elke klik
        resetTimer();

        if (openCards.length === 2) {
            setTimeout(function () {
                if (openCards[0].dataset.number === openCards[1].dataset.number) {
                    matchedCards.push(openCards[0], openCards[1]);
                    score++;
                    score_toner.textContent = score + " paartje(s) gevonden";
                } else {
                    openCards[0].classList.remove("open");
                    openCards[1].classList.remove("open");
                }
                openCards = [];

                if (matchedCards.length === getal) {
                    stopTimer();
                    alert("Gefeliciteerd! Je hebt gewonnen in " + timer.toFixed(1) + " seconden!");
                }
            }, 750);
        }
    }
}

    
    function andergraad() {
        if (graadgekozen) {
            graadgekozen = false;
            const kaarten = document.querySelectorAll('.speelkaart');
            kaarten.forEach(kaart => kaart.remove());
            memoryGame.classList.remove("small-cards");
            getal = 0;
            testP.textContent = "Aantal kaarten: " + getal;
            stopTimer();
        }
    }
    </script>
    

</body>
</html>
